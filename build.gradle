buildscript {
	repositories {
		mavenCentral()
		maven { url "https://plugins.gradle.org/m2/" } // plugin 저장소
	}
	dependencies {
		classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.5.21.RELEASE'
	}
}

plugins {
	id 'java'
	id "org.flywaydb.flyway" version "5.0.7"
}

apply plugin: 'org.springframework.boot'


group = 'my'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '1.8'


repositories {
	mavenCentral()
}

/*
gradle task 실행 순서
사전: database는 만들어져 있어야 함
flywayClean을 하면 database가 모두 초기화 됨
flywayMigrate 를 실행하면 Version.SQL이 실행됨
gradle task 실행시 JVM 옵션 : -Ddb.server=서버주소:포트 -Ddb.user=username -Ddb.password=userpwd
 */
flyway {
	url = 'jdbc:mysql://' + System.getProperty('db.server') + '/sampledb?useUnicode=true&charaterEncoding=utf-8'
	user = System.getProperty('db.user')
	password = System.getProperty('db.password')
}

dependencies {
	// compile 'org.springframework.boot:spring-boot-starter-web'
	compile 'org.springframework.boot:spring-boot-starter-batch'
	compile 'org.springframework.boot:spring-boot-starter-data-jpa'
	compile 'org.springframework.boot:spring-boot-starter-jdbc'
	runtime 'mysql:mysql-connector-java'

	compile group: 'joda-time', name: 'joda-time', version: '2.10.1'

	compile 'org.projectlombok:lombok'

	testCompile 'org.springframework.boot:spring-boot-starter-test'
	testCompile 'org.springframework.batch:spring-batch-test'
}